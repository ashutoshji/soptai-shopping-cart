{"ast":null,"code":"import e, { useState as r, useRef as t, useCallback as n, useEffect as o, memo as i } from \"react\";\n\nfunction c(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var n = r[t];\n    n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);\n  }\n}\n\nfunction l(e, r, t) {\n  return r in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\n\nfunction s() {\n  return (s = Object.assign || function (e) {\n    for (var r = 1; r < arguments.length; r++) {\n      var t = arguments[r];\n\n      for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n    }\n\n    return e;\n  }).apply(this, arguments);\n}\n\nfunction a(e, r) {\n  if (null == e) return {};\n\n  var t,\n      n,\n      o = function (e, r) {\n    if (null == e) return {};\n    var t,\n        n,\n        o = {},\n        i = Object.keys(e);\n\n    for (n = 0; n < i.length; n++) t = i[n], r.indexOf(t) >= 0 || (o[t] = e[t]);\n\n    return o;\n  }(e, r);\n\n  if (Object.getOwnPropertySymbols) {\n    var i = Object.getOwnPropertySymbols(e);\n\n    for (n = 0; n < i.length; n++) t = i[n], r.indexOf(t) >= 0 || Object.prototype.propertyIsEnumerable.call(e, t) && (o[t] = e[t]);\n  }\n\n  return o;\n}\n\nfunction u(e, r) {\n  return function (e) {\n    if (Array.isArray(e)) return e;\n  }(e) || function (e, r) {\n    if (!(Symbol.iterator in Object(e) || \"[object Arguments]\" === Object.prototype.toString.call(e))) return;\n    var t = [],\n        n = !0,\n        o = !1,\n        i = void 0;\n\n    try {\n      for (var c, l = e[Symbol.iterator](); !(n = (c = l.next()).done) && (t.push(c.value), !r || t.length !== r); n = !0);\n    } catch (e) {\n      o = !0, i = e;\n    } finally {\n      try {\n        n || null == l.return || l.return();\n      } finally {\n        if (o) throw i;\n      }\n    }\n\n    return t;\n  }(e, r) || function () {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n  }();\n}\n\nvar f = \"REACT_COOL_IMG\",\n    m = function () {\n  function e() {\n    !function (e, r) {\n      if (!(e instanceof r)) throw new TypeError(\"Cannot call a class as a function\");\n    }(this, e), l(this, \"img\", null), l(this, \"timeout\", null), l(this, \"retries\", 1);\n  }\n\n  var r, t, n;\n  return r = e, (t = [{\n    key: \"load\",\n    value: function (e, r, t, n, o, i) {\n      var c = this,\n          l = n.count,\n          s = void 0 === l ? 3 : l,\n          a = n.delay,\n          u = void 0 === a ? 2 : a,\n          f = n.acc,\n          m = void 0 === f ? \"*\" : f;\n      this.img = new Image(), this.img.src = e, r && (this.img.crossOrigin = r), t && this.img.decode().catch(function () {}), this.img.onerror = function (r) {\n        if (!s || c.retries > s) o(r);else {\n          var t = \"*\" === m ? Math.pow(u, c.retries) : u * c.retries;\n          !1 === m && (t = u), c.timeout = setTimeout(function () {\n            c.clearImgSrc(), c.img.src = e;\n          }, 1e3 * t), c.retries += 1;\n        }\n      }, this.img.onload = function (e) {\n        i(e);\n      };\n    }\n  }, {\n    key: \"unload\",\n    value: function () {\n      this.img && (this.img.onerror = null, this.img.onload = null, this.clearImgSrc(), this.img = null), this.timeout && (clearTimeout(this.timeout), this.timeout = null), this.retries = 1;\n    }\n  }, {\n    key: \"clearImgSrc\",\n    value: function () {\n      this.img.src = \"\";\n\n      try {\n        delete this.img.src;\n      } catch (e) {}\n    }\n  }]) && c(r.prototype, t), n && c(r, n), e;\n}(),\n    g = function (i) {\n  var c = i.className,\n      l = i.placeholder,\n      g = i.src,\n      h = i.error,\n      d = i.crossOrigin,\n      p = i.decode,\n      y = i.lazy,\n      v = i.cache,\n      b = i.debounce,\n      O = i.observerOptions,\n      A = i.retry,\n      w = i.srcSet,\n      S = i.sizes,\n      I = i.onError,\n      E = i.onLoad,\n      j = a(i, [\"className\", \"placeholder\", \"src\", \"error\", \"crossOrigin\", \"decode\", \"lazy\", \"cache\", \"debounce\", \"observerOptions\", \"retry\", \"srcSet\", \"sizes\", \"onError\", \"onLoad\"]),\n      z = t(new m()).current,\n      N = function (e, i) {\n    var c = i.root,\n        l = void 0 === c ? null : c,\n        s = i.rootMargin,\n        a = void 0 === s ? \"50px\" : s,\n        f = i.threshold,\n        m = void 0 === f ? .01 : f,\n        g = function () {\n      return null;\n    },\n        h = [g, !0, g];\n\n    if (\"undefined\" == typeof window) return h;\n    if (!window.IntersectionObserver) return console.error(\"ðŸ’¡react-cool-img: this browser doesn't support IntersectionObserver, please install polyfill to enable lazy loading. More info: https://github.com/wellyshen/react-cool-img#intersectionobserver-polyfill\"), h;\n    var d = u(r(!1), 2),\n        p = d[0],\n        y = d[1],\n        v = u(r(null), 2),\n        b = v[0],\n        O = v[1],\n        A = t(null),\n        w = t(null),\n        S = m;\n    \"number\" != typeof m && (console.error(\"ðŸ’¡react-cool-img: the threshold of observerOptions must be a number. Use 0 as fallback.\"), S = 0);\n    var I = n(function () {\n      w.current && (clearTimeout(w.current), w.current = null);\n    }, []);\n    return o(function () {\n      A.current && A.current.disconnect(), A.current = new IntersectionObserver(function (r) {\n        u(r, 1)[0].isIntersecting && !p ? w.current = setTimeout(function () {\n          y(!0);\n        }, e) : I();\n      }, {\n        root: l,\n        rootMargin: a,\n        threshold: S\n      });\n      var r = A.current;\n      return b && r.observe(b), function () {\n        r.disconnect(), I();\n      };\n    }, [b, p, l, a, S, e]), [O, p, y];\n  }(b, O),\n      P = u(N, 2),\n      T = P[0],\n      k = P[1],\n      x = u(r(l || \"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"), 2),\n      C = x[0],\n      L = x[1],\n      M = C === g,\n      B = g ? g.replace(/^.*[\\\\/]/, \"\").split(\".\")[0] : \"\",\n      J = function (e) {\n    I(e), h ? L(h) : l && L(l);\n  },\n      R = function (e) {\n    E(e), L(g), v && function (e) {\n      try {\n        var r = JSON.parse(sessionStorage.getItem(f)) || {};\n        r[e] = new Date(), sessionStorage.setItem(f, JSON.stringify(r));\n      } catch (e) {\n        console.error(\"ðŸ’¡react-cool-img: \".concat(e));\n      }\n    }(g);\n  };\n\n  return o(function () {\n    var e = function () {\n      z.load(g, d, p, A, J, R);\n    };\n\n    return !y || v && function (e) {\n      try {\n        return !!(JSON.parse(sessionStorage.getItem(f)) || {})[e] || !1;\n      } catch (e) {\n        return console.error(\"ðŸ’¡react-cool-img: \".concat(e)), !1;\n      }\n    }(g) ? e() : k && e(), function () {\n      z.unload();\n    };\n  }, [v, k, g, d, p, A]), e.createElement(e.Fragment, null, e.createElement(\"img\", s({\n    className: \"\".concat(c, \" no-js-\").concat(B),\n    src: C,\n    crossOrigin: M ? d : null,\n    srcSet: M ? w : null,\n    sizes: M ? S : null,\n    ref: T\n  }, j)), e.createElement(\"noscript\", null, e.createElement(\"style\", null, \".no-js-\".concat(B, \" { display: none !important; }\")), e.createElement(\"img\", s({\n    className: c,\n    src: g,\n    crossOrigin: d,\n    srcSet: w,\n    sizes: S\n  }, j))));\n};\n\ng.defaultProps = {\n  className: \"\",\n  placeholder: null,\n  error: null,\n  crossOrigin: null,\n  decode: !0,\n  lazy: !0,\n  cache: !0,\n  debounce: 300,\n  observerOptions: {},\n  retry: {},\n  srcSet: null,\n  sizes: null,\n  onError: function () {\n    return null;\n  },\n  onLoad: function () {\n    return null;\n  }\n};\nvar h = i(g);\nexport default h;","map":null,"metadata":{},"sourceType":"module"}